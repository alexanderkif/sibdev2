(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"1baf":function(t,e,s){},"272d":function(t,e,s){"use strict";var a=s("1baf"),i=s.n(a);i.a},"469c":function(t,e,s){},"47c5":function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEwIDVINVYxMEgxMFY1WiIgc3Ryb2tlPSIjMjcyNzI3IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8cGF0aCBkPSJNMTkgNUgxNFYxMEgxOVY1WiIgc3Ryb2tlPSIjMjcyNzI3IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8cGF0aCBkPSJNMTkgMTRIMTRWMTlIMTlWMTRaIiBzdHJva2U9IiMyNzI3MjciIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMCAxNEg1VjE5SDEwVjE0WiIgc3Ryb2tlPSIjMjcyNzI3IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K"},"5c65":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"flex search",class:t.getMovies&&t.getMovies.length?"":"flex-center"},[a("div",{staticClass:"search__control",class:t.getMovies&&t.getMovies.length?"search__control_found":""},[a("div",{staticClass:"row search__label",class:t.getMovies&&t.getMovies.length?"justify-start search__label_left":"justify-center"},[t._v("\n      Поиск видео\n    ")]),a("form",{staticClass:"row full-width inline justify-center search__form",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.onSubmit(e)}}},[a("q-input",{ref:"search",staticClass:"search__input relative-position",class:t.getMovies&&t.getMovies.length?"search__input_found":"",attrs:{label:"Что хотите посмотреть?",outlined:""},model:{value:t.q,callback:function(e){t.q=e},expression:"q"}},[t.getMovies&&t.getMovies.length?a("q-btn",{staticClass:"search__heart-btn absolute-right",attrs:{flat:"",round:"",color:"primary"},on:{click:t.addFavorite}},[t.getFavoritesQuery.includes(t.q)?a("img",{attrs:{src:s("a143")}}):a("img",{attrs:{src:s("fbe8")}})]):t._e()],1),a("q-btn",{staticClass:"q-ml-none search__btn",attrs:{label:"Найти",type:"submit",color:"primary",size:"20px","no-caps":""}})],1)]),a("SearchResults",{attrs:{lastQuery:t.lastQuery}}),a("q-dialog",{staticClass:"fullscreen flex flex-center search__fav-modal",model:{value:t.openFavModal,callback:function(e){t.openFavModal=e},expression:"openFavModal"}},[a("FavModal",{attrs:{lastQuery:t.lastQuery},on:{"close-fav-modal":function(e){t.openFavModal=!1}}})],1)],1)},i=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-results"},[t.getMovies&&t.getMovies.length?a("div",{staticClass:"search-results__filter row justify-between full-width"},[a("div",{staticClass:"flex items-center"},[t._v('\n      Видео по запросу "'),a("b",[t._v(t._s(t.lastQuery))]),t._v('"\n      '),a("span",{staticClass:"search-results__total"},[t._v("\n        "+t._s(t.getTotal>=1e6?"> 1 млн":t.getTotal)+"\n      ")])]),a("div",[a("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",round:"",color:"primary"},on:{click:function(e){t.list=!0}}},[a("img",{attrs:{src:s("e7e9")}})]),a("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",round:"",color:"primary"},on:{click:function(e){t.list=!1}}},[a("img",{attrs:{src:s("47c5")}})])],1)]):t._e(),a("div",{staticClass:"search-results__results flex justify-around"},t._l(t.getMovies,(function(e){return a("q-card",{key:e.index,staticClass:"search-results__card",class:t.list?"search-results__card_list":"",attrs:{flat:""},on:{click:function(s){return t.runVideoDialog(e.id.videoId)}}},[a("img",{staticClass:"search-results__img",class:t.list?"search-results__img_list":"",attrs:{src:e.snippet.thumbnails.medium.url}}),a("div",{staticClass:"seatch-result__text",class:t.list?"search-results__text_list":""},[a("div",{staticClass:"search-results__card-title row",class:t.list?"search-results__card-title_list":""},[t._v("\n          "+t._s(e.snippet.title.length>60?e.snippet.title.slice(0,60)+"...":e.snippet.title)+"\n        ")]),a("div",{staticClass:"search-results__card-descr",class:t.list?"search-results__card-descr_list":""},[a("div",[t._v(t._s(e.snippet.channelTitle))]),a("div",[t._v(t._s(e.viewCount))])])])])})),1),t.showVideo?a("q-page",{staticClass:"fullscreen bg-transition flex flex-center"},[a("div",{staticClass:"fullscreen bg-black",staticStyle:{opacity:"0.7"}}),a("iframe",{staticStyle:{"z-index":"10000"},attrs:{id:"ytplayer",type:"text/html",width:"640",height:"360",src:"https://www.youtube.com/embed/"+t.video+"?autoplay=1",frameborder:"0",allow:"autoplay, fullscreen"}}),a("q-page-sticky",{staticStyle:{"z-index":"10000"},attrs:{position:"top-right",offset:[18,18]}},[a("q-btn",{attrs:{fab:"",icon:"close",color:"primary"},on:{click:function(e){e.stopPropagation(),t.showVideo=!1}}})],1)],1):t._e()],1)},c=[],r={name:"SearchResults",props:{lastQuery:String},data(){return{showVideo:!1,video:"",list:!1}},methods:{runVideoDialog(t){this.video=t,this.showVideo=!0}},computed:{getMovies(){return this.$store.getters["movie/getMovies"]},getTotal(){return this.$store.getters["movie/getTotal"]}}},o=r,n=(s("272d"),s("2877")),u=s("9c40"),M=s("f09f"),I=s("9989"),g=s("de5e"),d=s("eebe"),y=s.n(d),m=Object(n["a"])(o,l,c,!1,null,"2f1e160e",null),D=m.exports;y()(m,"components",{QBtn:u["a"],QCard:M["a"],QPage:I["a"],QPageSticky:g["a"]});var j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-card",{staticClass:"fav-modal q-pa-md"},[s("q-card-section",{staticClass:"row items-center justify-center fav-modal__title"},[t._v("\n    Сохранить запрос\n  ")]),s("q-card-section",{staticClass:"row items-center"},[s("q-input",{staticClass:"fav-modal__query full-width",attrs:{label:"Запрос",filled:"",disable:""},model:{value:t.lastQuery,callback:function(e){t.lastQuery=e},expression:"lastQuery"}})],1),s("q-card-section",{staticClass:"row items-center q-pt-lg"},[s("q-input",{ref:"name",staticClass:"fav-modal__name full-width",attrs:{label:"Укажите название *",outlined:"",rules:[function(t){return!!t||"* Required"}],"lazy-rules":""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),s("q-card-section",{staticClass:"row items-center"},[s("q-select",{staticClass:"fav-modal_sort full-width",attrs:{outlined:"",options:t.options,label:"Сортировать по"},model:{value:t.sort,callback:function(e){t.sort=e},expression:"sort"}})],1),s("q-card-section",{staticClass:"row items-center q-py-lg"},[s("div",{staticClass:"col-8"},[s("q-badge",{attrs:{color:"white","text-color":"black"}},[t._v("\n        Максимальное количество\n      ")]),s("q-slider",{attrs:{min:0,max:50},model:{value:t.count,callback:function(e){t.count=e},expression:"count"}})],1),s("q-input",{ref:"count",staticClass:"fav-modal__count col-4 q-pl-lg text-center",attrs:{outlined:"",rules:[function(t){return t>0||"Должен быть больше 0"},function(t){return t<51||"Должен быть не больше 50"}]},model:{value:t.count,callback:function(e){t.count=e},expression:"count"}})],1),s("q-card-actions",{staticClass:"row q-px-md",attrs:{align:"center"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"col",attrs:{outline:"",label:"Не сохранять",color:"primary"}}),s("q-btn",{staticClass:"col",attrs:{label:"Сохранить",color:"primary"},on:{click:t.save}})],1)],1)},N=[],b=(s("fb6a"),s("4e82"),{name:"FavModal",props:{lastQuery:String},data(){return{name:"",options:["Без сортировки","От А до Я","От Я до А"],sort:"Без сортировки",count:25}},methods:{save(){if(this.$refs.name.validate(),this.$refs.count.validate(),this.$refs.name.hasError||this.$refs.count.hasError)return!1;const t={};t.name=this.name,t.q=this.lastQuery;let e=this.$q.localStorage.getItem("sibdev2_fav_"+this.getUser.name)||[];e.length>this.count-1&&(e=e.slice(0,this.count-1)),e.push(t),"От А до Я"===this.sort&&(e=e.sort((t,e)=>t.name>e.name?1:t.name<e.name?-1:0)),"От Я до А"===this.sort&&(e=e.sort((t,e)=>t.name>e.name?-1:t.name<e.name?1:0)),this.$q.localStorage.set("sibdev2_fav_"+this.getUser.name,e),this.$emit("close-fav-modal")}},computed:{getUser(){return this.$store.getters["user/getUser"]}}}),v=b,h=(s("7fe0"),s("a370")),T=s("27f9"),p=s("ddd8"),f=s("58a81"),A=s("c1d0"),C=s("4b7e"),x=s("7f67"),S=Object(n["a"])(v,j,N,!1,null,"496c86b9",null),z=S.exports;y()(S,"components",{QCard:M["a"],QCardSection:h["a"],QInput:T["a"],QSelect:p["a"],QBadge:f["a"],QSlider:A["a"],QCardActions:C["a"],QBtn:u["a"]}),y()(S,"directives",{ClosePopup:x["a"]});var k={name:"PageIndex",components:{SearchResults:D,FavModal:z},data(){return{q:"",lastQuery:"",maxResults:12,showVideo:!1,openFavModal:!1}},mounted(){this.$route.query.q&&(this.q=this.$route.query.q,this.onSubmit())},methods:{onSubmit(){this.lastQuery=this.q,this.$store.dispatch("movie/getMovies",{maxResults:this.maxResults,q:this.q})},addFavorite(){return""!==this.lastQuery&&(this.getFavoritesQuery.includes(this.lastQuery)?(alert("Запрос уже сохранен."),!1):void(this.openFavModal=!0))}},computed:{getMovies(){return this.$store.getters["movie/getMovies"]},getUser(){return this.$store.getters["user/getUser"]},getFavoritesQuery(){if(this.getUser&&this.getUser.name){const t=this.$q.localStorage.getItem("sibdev2_fav_"+this.getUser.name);return t?t.map(t=>t.q):[]}return[]}}},_=k,w=(s("87cd"),s("24e8")),E=Object(n["a"])(_,a,i,!1,null,"566deeb1",null);e["default"]=E.exports;y()(E,"components",{QPage:I["a"],QInput:T["a"],QBtn:u["a"],QDialog:w["a"]})},"7fe0":function(t,e,s){"use strict";var a=s("469c"),i=s.n(a);i.a},"87cd":function(t,e,s){"use strict";var a=s("e417"),i=s.n(a);i.a},a143:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIwLjg0MDEgNC42MDk5OUMyMC4zMjk0IDQuMDk5IDE5LjcyMjkgMy42OTM2NCAxOS4wNTU1IDMuNDE3MDhDMTguMzg4IDMuMTQwNTIgMTcuNjcyNiAyLjk5ODE3IDE2Ljk1MDEgMi45OTgxN0MxNi4yMjc2IDIuOTk4MTcgMTUuNTEyMiAzLjE0MDUyIDE0Ljg0NDggMy40MTcwOEMxNC4xNzczIDMuNjkzNjQgMTMuNTcwOSA0LjA5OSAxMy4wNjAxIDQuNjA5OTlMMTIuMDAwMSA1LjY2OTk5TDEwLjk0MDEgNC42MDk5OUM5LjkwODQzIDMuNTc4MyA4LjUwOTE1IDIuOTk4NyA3LjA1MDEyIDIuOTk4N0M1LjU5MTA5IDIuOTk4NyA0LjE5MTgxIDMuNTc4MyAzLjE2MDEyIDQuNjA5OTlDMi4xMjg0MyA1LjY0MTY5IDEuNTQ4ODMgNy4wNDA5NiAxLjU0ODgzIDguNDk5OTlDMS41NDg4MyA5Ljk1OTAzIDIuMTI4NDMgMTEuMzU4MyAzLjE2MDEyIDEyLjM5TDQuMjIwMTIgMTMuNDVMMTIuMDAwMSAyMS4yM0wxOS43ODAxIDEzLjQ1TDIwLjg0MDEgMTIuMzlDMjEuMzUxMSAxMS44NzkyIDIxLjc1NjUgMTEuMjcyOCAyMi4wMzMgMTAuNjA1M0MyMi4zMDk2IDkuOTM3ODkgMjIuNDUxOSA5LjIyMjQ4IDIyLjQ1MTkgOC40OTk5OUMyMi40NTE5IDcuNzc3NTEgMjIuMzA5NiA3LjA2MjEgMjIuMDMzIDYuMzk0NjRDMjEuNzU2NSA1LjcyNzE4IDIxLjM1MTEgNS4xMjA3NSAyMC44NDAxIDQuNjA5OTlaIiBmaWxsPSIjQzVFNEY5IiBzdHJva2U9IiMxMzkwRTUiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo="},e417:function(t,e,s){},e7e9:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgb3BhY2l0eT0iMC4zIj4KPHBhdGggZD0iTTggNkgyMSIgc3Ryb2tlPSIjMjcyNzI3IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8cGF0aCBkPSJNOCAxMkgyMSIgc3Ryb2tlPSIjMjcyNzI3IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8cGF0aCBkPSJNOCAxOEgyMSIgc3Ryb2tlPSIjMjcyNzI3IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8cGF0aCBkPSJNMyA2SDMuMDEiIHN0cm9rZT0iIzI3MjcyNyIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPHBhdGggZD0iTTMgMTJIMy4wMSIgc3Ryb2tlPSIjMjcyNzI3IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8cGF0aCBkPSJNMyAxOEgzLjAxIiBzdHJva2U9IiMyNzI3MjciIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjwvZz4KPC9zdmc+Cg=="},fbe8:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIwLjg0MDEgNC42MDk5OUMyMC4zMjk0IDQuMDk5IDE5LjcyMjkgMy42OTM2NCAxOS4wNTU1IDMuNDE3MDhDMTguMzg4IDMuMTQwNTIgMTcuNjcyNiAyLjk5ODE3IDE2Ljk1MDEgMi45OTgxN0MxNi4yMjc2IDIuOTk4MTcgMTUuNTEyMiAzLjE0MDUyIDE0Ljg0NDggMy40MTcwOEMxNC4xNzczIDMuNjkzNjQgMTMuNTcwOSA0LjA5OSAxMy4wNjAxIDQuNjA5OTlMMTIuMDAwMSA1LjY2OTk5TDEwLjk0MDEgNC42MDk5OUM5LjkwODQzIDMuNTc4MyA4LjUwOTE1IDIuOTk4NyA3LjA1MDEyIDIuOTk4N0M1LjU5MTA5IDIuOTk4NyA0LjE5MTgxIDMuNTc4MyAzLjE2MDEyIDQuNjA5OTlDMi4xMjg0MyA1LjY0MTY5IDEuNTQ4ODMgNy4wNDA5NiAxLjU0ODgzIDguNDk5OTlDMS41NDg4MyA5Ljk1OTAzIDIuMTI4NDMgMTEuMzU4MyAzLjE2MDEyIDEyLjM5TDQuMjIwMTIgMTMuNDVMMTIuMDAwMSAyMS4yM0wxOS43ODAxIDEzLjQ1TDIwLjg0MDEgMTIuMzlDMjEuMzUxMSAxMS44NzkyIDIxLjc1NjUgMTEuMjcyOCAyMi4wMzMgMTAuNjA1M0MyMi4zMDk2IDkuOTM3ODkgMjIuNDUxOSA5LjIyMjQ4IDIyLjQ1MTkgOC40OTk5OUMyMi40NTE5IDcuNzc3NTEgMjIuMzA5NiA3LjA2MjEgMjIuMDMzIDYuMzk0NjRDMjEuNzU2NSA1LjcyNzE4IDIxLjM1MTEgNS4xMjA3NSAyMC44NDAxIDQuNjA5OTlWNC42MDk5OVoiIHN0cm9rZT0iIzEzOTBFNSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cg=="}}]);